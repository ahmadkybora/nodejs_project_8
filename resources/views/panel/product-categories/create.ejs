<%- include('../../layouts/panel/header'); %>
<div class="container">
    <div class="jumbotron">
        <!--//-->
        <%- include("../../errors/errorMessages.ejs") %>
        <form method="post" action="/panel/product-categories/store" enctype="multipart/form-data">
            <!--//-->
            <div class="row">
                <div class="form-group col-md-6">
                    <select class="form-control"
                            name="employeeId"
                            id="employeeId">
                        <% for(let employee of employees) { %>
                            <option value="<%= employee.id %>"><%= employee.username %></option>
                        <% } %>
                    </select>
                </div>
                <div class="form-group col-md-6">
                    <select class="form-control"
                            name="brandId"
                            id="brandId">
                        <% for(let brand of brands) { %>
                            <option value="<%= brand.id %>"><%= brand.name %></option>
                        <% } %>
                    </select>
                </div>
            </div>
            <div class="row">
                <div class="form-group col-md-6">
                    <select class="form-control"
                            name="status"
                            id="status">
                        <option value="ACTIVE">ACTIVE</option>
                        <option value="PENDING">PENDING</option>
                    </select>
                </div>
                <div class="form-group col-md-6">
                    <input type="text"
                           class="form-control"
                           name="name"
                           id="name"
                           placeholder="Enter Name">
                </div>
                <div class="input-group mb-3">
                    <div class="input-group-prepend">
                        <button
                                class="btn btn-sm btn-outline-secondary"
                                type="button"
                                id="imageUpload"
                        >
                            آپلود عکس
                        </button>
                    </div>
                    <div class="custom-file">
                        <input
                                type="file"
                                class="custom-file-input"
                                id="file"
                                name="file"
                        />
                        <label
                                id="imageStatus"
                                class="custom-file-label"
                                for="selectedImage"
                        >
                            عکس مورد نظر را انتخاب کنید
                        </label>
                    </div>
                </div>
            </div>
            <div id="progressDiv" style="display: none">
                <div class="progress">
                    <div
                            id="progressBar"
                            class="progress-bar progress-bar-striped progress-bar-animated"
                            role="progressbar"
                            aria-valuemin="0"
                            aria-valuemax="100"
                    ></div>
                </div>
            </div>
            <!--//-->
            <div class="form-group">
                <button type="submit" class="btn btn-primary">Submit</button>
            </div>
        </form>
    </div>
</div>
<script>
    function ProductCategoryStore() {
        let baseUrl = "http://localhost:8000/panel/";
        let formData = new FormData();

        formData.append("employeeId", JSON.stringify($("#employeeId").val()));
        formData.append("brandId", JSON.stringify($("#brandId").val()));
        formData.append("status", JSON.stringify($("#status").val()));
        formData.append("name", JSON.stringify($("#name").val()));
        formData.append("file", JSON.stringify($("#file")[0].files[0]));

        /*let a = formData.get("file");
        alert(typeof JSON.stringify(a));*/
        $.ajax({
            type: "POST",
            method: "POST",
            url: baseUrl + "product-categories/store",
            //data : {'formData': JSON.stringify(formData)},
            data : JSON.stringify(formData),
            //data : formData,
            //dataType : "json",
            cache: false,
            processData: false,
            contentType : 'application/json',
            success: function(data){
                alert(data)
            },
            error: function (){}
        })
    }
</script>
<%- include('../../layouts/panel/footer'); %>


